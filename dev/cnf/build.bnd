#*******************************************************************************
# Copyright (c) 2017 IBM Corporation and others.
# All rights reserved. This program and the accompanying materials
# are made available under the terms of the Eclipse Public License v1.0
# which accompanies this distribution, and is available at
# http://www.eclipse.org/legal/epl-v10.html
#
# Contributors:
#     IBM Corporation - initial API and implementation
#*******************************************************************************
# Configure Repositories
-include ${workspace}/gradle.properties, ${workspace}/generated.properties

# Maven repository credentials
-connection-settings: ${if;${artifactory.download.token};server;-dummy};id=https://${artifactory.download.server};username=${artifactory.download.user};password=${artifactory.download.token}, -bnd

# Logging for repository connection when debugging
#-connection-log: ${.}/connection-log.txt

# Default to upload artifacts with master tagged, but this should be set by
# including generated.properties above.
bGitBranch=master

# Defines what tags to attach to artifacts uploaded on Artifactory.
# matrixParams=\;GIT_BRANCH\=master\;GIT_FEATURE_BRANCH\=${bGitBranch}

-plugin.1.Local: \
    aQute.bnd.repository.maven.provider.MavenBndRepository; \
        name = Local; \
        noupdateOnRelease = true; \
        local = ${build}/local

-plugin.2.Release: \
    aQute.bnd.repository.maven.provider.MavenBndRepository; \
        name = Release; \
        noupdateOnRelease = true; \
        local = ${env;LOCAL_REPO_PATH;${build}/release};

-plugin.3.RemotePublic = ${fetch.oss.repository}

-plugin.4.RemoteIBM = ${fetch.oss.ibm.repository}

-plugin.5.RemoteIBMJava = ${fetch.ibm.java.repository}

# Don't upload sources or javadoc unless bundle overrides
-maven-release: ${if;${is;${env;PUBLISH_REPO;Release};Artifactory};remote;local}, sources;path=NONE, javadoc;path=NONE

javac.source: 1.7
javac.target: 1.7
javac.debug: true
javac.encoding: UTF-8
-sources: false

-pedantic: true
-fixupmessages.missingexport: "Used bundle version * for exported package";is:=error

-releaserepo: ${env;PUBLISH_REPO;Release}
-baselinerepo: Release
-buildrepo: Local
-groupid: ${if;${test.project};test;dev}
-pom: 

buildEngineName: defaultEngine

# This is the version of JUnit that will be used at build time and run time
junit: org.apache.servicemix.bundles.junit;version="[4.11,5)"

# This is the version of Mockito that will be used at build time and run time
mockito: org.mockito.mockito-core;version="[1.9,2)",\
  org.objenesis;version="[2.1,3)"

-pluginpath: \
    ${workspace}/cnf/lib/wlp-bndPlugins.jar,\
    ${workspace}/cnf/lib/org.apache.aries.util-1.2.0.jar

test.project: false

instrument.disabled: ${if;${test.project};true;false}
instrument.classesIncludes: **/*.class
instrument.classesExcludes: 
instrument.ffdc: true
instrument.taskInjection: false

-buildpath.instrument: ${if;${instrument.disabled};;com.ibm.ws.ras.instrument\\;version=latest}

-buildpath.bootclasspath: ${javac.bootclasspath.${javac.source}}

javac.bootclasspath.java6:
javac.bootclasspath.java7:
javac.bootclasspath.java8:

javac.bootclasspath.1.4: \
    com.ibm.ws.internal.prereq.java:java.rt;version=1.6.0;boot=true

javac.bootclasspath.1.6: \
    com.ibm.ws.internal.prereq.java:java.rt;version=1.6.0;boot=true

javac.bootclasspath.1.7: \
    com.ibm.ws.internal.prereq.java:java.ibmcertpathfw;version=1.7.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.ibmjcefw;version=1.7.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.ibmjgssfw;version=1.7.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.ibmjgssprovider;version=1.7.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.ibmjssefw;version=1.7.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.ibmorbapi;version=1.7.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.ibmpkcs;version=1.7.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.jlm;version=1.7.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.math;version=1.7.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.rt;version=1.7.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.vm;version=1.7.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.xml;version=1.7.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.xmldsigfw;version=1.7.0;boot=true

javac.bootclasspath.1.8: \
    com.ibm.ws.internal.prereq.java:java.ibmcertpathfw;version=1.8.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.ibmjcefw;version=1.8.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.ibmjgssfw;version=1.8.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.ibmjgssprovider;version=1.8.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.ibmjssefw;version=1.8.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.ibmorbapi;version=1.8.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.ibmpkcs;version=1.8.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.jlm;version=1.8.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.math;version=1.8.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.rt;version=1.8.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.vm;version=1.8.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.xml;version=1.8.0;boot=true, \
    com.ibm.ws.internal.prereq.java:java.xmldsigfw;version=1.8.0;boot=true

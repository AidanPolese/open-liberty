# Configure Repositories
-include ${workspace}/gradle.properties, ${workspace}/generated.properties

# Artifactory repository credentials
-connection-settings: ${.}/connection-settings.xml

# Logging for repository connection when debugging
#-connection-log: ~/.bnd/connection-log.txt

# disable central for now until we have a local server we can point to
#-plugin.1.Central: \
#	aQute.bnd.deployer.repository.wrapper.Plugin; \
#		location = "${build}/cache/wrapper"; \
#		reindex = true, \
#	aQute.bnd.jpm.Repository; \
#		includeStaged = true; \
#		name = Central; \
#		location = ~/.bnd/shacache; \
#		index = ${build}/central.json

-plugin.1.MavenLocal: \
	aQute.bnd.repository.maven.provider.MavenBndRepository; \
		name = MavenLocal; \
		pretty = true; \
		local = ${build}/maven-local

-plugin.2.Local: \
	aQute.bnd.deployer.repository.LocalIndexedRepo; \
		name = Local; \
		pretty = true; \
		local = ${build}/local

-plugin.3.Templates: \
	aQute.bnd.deployer.repository.LocalIndexedRepo; \
		name = Templates; \
		pretty = true; \
		local = ${build}/templates

-plugin.4.Release: \
	aQute.bnd.deployer.repository.LocalIndexedRepo; \
		name = Release; \
		pretty = true; \
		local = ${env;LOCAL_REPO_PATH;${build}/release};

# Default to upload artifacts with master tagged, but this should be set by
# including generated.properties above.
bGitBranch=master

# Defines what tags to attach to artifacts uploaded on Artifactory.
matrixParams=\;GIT_BRANCH\=master\;GIT_FEATURE_BRANCH\=${bGitBranch}

-plugin.5.Artifactory = \
	aQute.bnd.repository.maven.provider.MavenBndRepository; \
		releaseUrl="${artifactoryReleaseUrl}${matrixParams}" ; \
		snapshotUrl="${artifactorySnapshotUrl}${matrixParams}" ; \
		name = "Artifactory";

# Don't upload sources or javadoc unless bundle overrides
-maven-release: ${if;${is;${env;PUBLISH_REPO;Release};Artifactory};remote;local}, sources;path=NONE, javadoc;path=NONE

javac.source: 1.6
javac.target: 1.6
javac.debug: true
javac.encoding: UTF-8
-sources: false

-pedantic: true
-fixupmessages.missingexport: "Used bundle version * for exported package";is:=error

-releaserepo: ${env;PUBLISH_REPO;Release}
-baselinerepo: Release

buildEngineName: defaultEngine

# This is the version of JUnit that will be used at build time and run time
junit: org.apache.servicemix.bundles.junit;version="[4.11,5)"

# This is the version of Mockito that will be used at build time and run time
mockito: org.mockito.mockito-core;version="[1.9,2)",\
  org.objenesis;version="[2.1,3)"

-pluginpath: \
    ${workspace}/cnf/lib/wlp-bndPlugins.jar,\
    ${workspace}/cnf/lib/org.apache.aries.util-1.2.0.jar

instrument.disabled: false
instrument.classesIncludes: **/*.class
instrument.classesExcludes: 
instrument.ffdc: true
instrument.taskInjection: false

-buildpath.instrument: ${if;${instrument.disabled};;com.ibm.ws.ras.instrument\\;version=latest}

-buildpath.bootclasspath: ${javac.bootclasspath.${javac.source}}

javac.bootclasspath.java6:
javac.bootclasspath.java7:
javac.bootclasspath.java8:

javac.bootclasspath.1.4: \
    ${workspace}/prereq.java.1.6/lib/rt.jar;version=file;boot=true

javac.bootclasspath.1.6: \
    ${workspace}/prereq.java.1.6/lib/rt.jar;version=file;boot=true

javac.bootclasspath.1.7: \
    ${workspace}/prereq.java.1.7/lib/ibmcertpathfw.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.7/lib/ibmjcefw.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.7/lib/ibmorbapi.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.7/lib/ibmpkcs.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.7/lib/jlm.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.7/lib/math.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.7/lib/rt.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.7/lib/vm.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.7/lib/xml.jar;version=file;boot=true

javac.bootclasspath.1.8: \
    ${workspace}/prereq.java.1.8/lib/ibmcertpathfw.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.8/lib/ibmjcefw.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.8/lib/ibmjgssfw.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.8/lib/ibmjgssprovider.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.8/lib/ibmjssefw.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.8/lib/ibmorbapi.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.8/lib/ibmpkcs.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.8/lib/jlm.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.8/lib/math.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.8/lib/rt.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.8/lib/vm.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.8/lib/xml.jar;version=file;boot=true, \
    ${workspace}/prereq.java.1.8/lib/xmldsigfw.jar;version=file;boot=true
